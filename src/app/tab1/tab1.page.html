<!-- HTML corregido - tab1.page.html -->
<ion-content class="home-bg" [fullscreen]="true">
  <!-- Banner superior simplificado -->
  <div class="app-banner">
    <div class="search-section">
      <div class="search-row">
        <ion-searchbar 
          class="search-bar" 
          placeholder="Busca regalos, chocolates, flores..." 
          show-clear-button="focus"
          mode="ios"
          animated="true"
          (ionInput)="onSearchChange($event)"
          [(ngModel)]="searchText">
        </ion-searchbar>
        <button class="profile-btn" (click)="openProfileMenu($event)">
          <ion-icon name="person-circle" class="profile-icon"></ion-icon>
        </button>
      </div>
    </div>
  </div>

  <!-- Promoción destacada -->
  <div class="promo-banner" *ngIf="showPromo">
    <div class="promo-content">
      <ion-icon name="gift" class="promo-icon"></ion-icon>
      <div class="promo-text">
        <span class="promo-title">¡Primer regalo!</span>
        <span class="promo-subtitle">20% OFF en tu primer pedido</span>
      </div>
    </div>
    <ion-button fill="clear" size="small" class="promo-close" (click)="showPromo = false">
      <ion-icon name="close"></ion-icon>
    </ion-button>
  </div>

  <!-- Categorías con título simplificado -->
  <div class="section-header" *ngIf="filteredCategories.length > 0 || searchText === ''">
    <h2 class="section-title">{{ searchText ? 'Resultados de búsqueda' : 'Categorías' }}</h2>
  </div>

  <!-- Grid de categorías mejorado (sin experiencias) -->
  <div class="categories-grid" *ngIf="filteredCategories.length > 0">
    <ion-card class="category-card" *ngFor="let cat of filteredCategories" (click)="onCategory(cat.id)">
      <div class="card-overlay"></div>
      <ion-img [src]="getCategoryImage(cat.id)" [alt]="cat.name" class="category-bg" loading="lazy"></ion-img>
      <ion-card-content class="category-content">
        <div class="category-icon-wrapper">
          <ion-icon [name]="cat.icon" class="category-icon"></ion-icon>
        </div>
        <span class="category-title">{{ cat.name }}</span>
        <span class="category-count">{{ cat.count }} opciones</span>
      </ion-card-content>
      <div class="category-badge" *ngIf="cat.popular">
        <ion-badge color="success">Popular</ion-badge>
      </div>
    </ion-card>
  </div>

  <!-- Mensaje cuando no hay resultados -->
  <div *ngIf="searchText && filteredCategories.length === 0" class="no-results">
    <ion-icon name="search" class="no-results-icon"></ion-icon>
    <h2>No encontramos "{{ searchText }}"</h2>
    <p>Intenta con otro término o explora nuestras categorías</p>
  </div>

  <!-- Sección de ofertas -->
  <div class="section-header">
    <h2 class="section-title">Ofertas especiales</h2>
  </div>
  
  <div class="offers-slider">
    <ion-card class="offer-card">
      <div class="offer-content">
        <div class="offer-text">
          <h3>Envío gratis</h3>
          <p>En pedidos superiores a $25.000</p>
        </div>
        <ion-icon name="rocket" class="offer-icon"></ion-icon>
      </div>
    </ion-card>
    
    <ion-card class="offer-card">
      <div class="offer-content">
        <div class="offer-text">
          <h3>Pack San Valentín</h3>
          <p>Flores + chocolates -15%</p>
        </div>
        <ion-icon name="heart" class="offer-icon"></ion-icon>
      </div>
    </ion-card>
  </div>
</ion-content>